{"version":3,"sources":["main.js","ouical.js"],"names":["jQuery","$","toggleAriaExpanded","el","action","target","next","attr","closeAllAriaExpandeds","each","this","css","on","toggleClass","elExpanded","document","event","console","log","closest","length","slick","slidesToShow","slidesToScroll","dots","arrows","infinite","centerMode","centerPadding","fade","asNavFor","swipe","swipeToSlide","focusOnSelect","responsive","breakpoint","settings","MS_IN_MINUTES","formatTime","date","toISOString","replace","calculateEndTime","end","Date","start","getTime","duration","calendarGenerators","google","startTime","endTime","encodeURI","title","description","address","join","yahoo","st","getTimezoneOffset","et","ics","eClass","calendarName","URL","ical","outlook","generateCalendars","validParams","params","undefined","data","generateMarkup","calendars","clazz","calendarId","result","createElement","innerHTML","Object","keys","forEach","services","className","id","getClass","options","getOrGenerateCalendarId","Math","floor","random","createCalendar"],"mappings":"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","file":"app.min.js","sourcesContent":["// Your main script\n\njQuery(function($) {\n\n\t//set aria-expanded attrs to top level menu a tags\n\t$('.menu-item-has-children a').attr('aria-expanded', 'false');\n\t//add hidden attr to submenus\n\t$('.sub-menu').attr('hidden', 'hidden').css('display','block');\n\n\t$('.js-mobile-toggle').on('click', function() {\n\t\t$('html').toggleClass('_header-is-open');\n\t});\n\n\t// Function to open/close an aria-expanded dropdown\n\tfunction toggleAriaExpanded(el, action) {\n\t\tlet target = $(el).next();\n\t\tel.attr('aria-expanded', action === 'open');\n\t\ttarget.attr('hidden', action === 'close');\n\t};\n\n\t// Function to close all aria-expanded dropdowns\n\tfunction closeAllAriaExpandeds() {\n\t\t$('.menu-item-has-children a[aria-expanded]').each(function(){\n\t\t\tlet el = $(this);\n\t\t\ttoggleAriaExpanded(el, 'close');\n\t\t});\n\t};\n\n\t// Aria Expanded for dropdowns etc\n\t$('.menu-item-has-children a[aria-expanded]').each(function(){\n\t\tlet el = $(this);\n\t\tel.on('click', function(){\n\t\t\tlet elExpanded = el.attr('aria-expanded');\n\t\t\tcloseAllAriaExpandeds();\n\t\t\ttoggleAriaExpanded(el, elExpanded === 'true' ? 'close' : 'open');\t\t\n\t\t});\n\t});\n \n\t// Hide dropdown menu on click outside\n\t$(document).on(\"click\", function(event){\n\t\tconsole.log(\"∆∆∆ Document on Click\");\n\t\tif(!$(event.target).closest('.menu-item-has-children a[aria-expanded]').length){\n\t\t\tconsole.log(\"∆∆∆ Document on Click closing all\");\n\t\t\tcloseAllAriaExpandeds();\n\t\t}\n\t});\n\n\n\t$('.cards').slick({\n\t\tslidesToShow: 1,\n\t\tslidesToScroll: 1,\n\t\tdots: true,\n\t\tarrows: false,\n\t\tinfinite: false,\n\t\tcenterMode: true,\n\t\tcenterPadding: '20px',\n\t});\n\n\tif ($('.schedule__days').length > 0) {\n\t\t// each day\n\t\t$('.schedule__days').slick({\n\t\t\tslidesToShow: 1,\n\t\t\tslidesToScroll: 1,\n\t\t\tarrows: false,\n\t\t\tfade: true,\n\t\t\tasNavFor: '.schedule__menu',\n\t\t\tswipe: false,\n\t\t\tswipeToSlide: false,\n\t\t});\n\t\t// menu for days\n\t\t$('.schedule__menu').slick({\n\t\t\tslidesToShow: 5,\n\t\t\tslidesToScroll: 1,\n\t\t\tasNavFor: '.schedule__days',\n\t\t\tarrows: false,\n\t\t\tfocusOnSelect: true,\t\t\t\n\t\t});\n\t\t// sessions\n\t\t$('.schedule__sessions').slick({\n\t\t\tslidesToShow: 5,\n\t\t\tslidesToScroll: 1,\n\t\t\tarrows: true,\n\t\t\tcenterMode: true,\n\t\t\tresponsive: [\t\n\t\t\t\t{\n\t\t\t\t\tbreakpoint: 1440,\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tarrows: true,\n\t\t\t\t\t\tslidesToShow: 4,\n\t\t\t\t\t\tslidesToScroll: 1,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tbreakpoint: 1024,\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tarrows: true,\n\t\t\t\t\t\tslidesToShow: 3,\n\t\t\t\t\t\tslidesToScroll: 1,\n\t\t\t\t\t}\n\t\t\t\t},\t\t\t\n\t\t\t\t{\n\t\t\t\t\tbreakpoint: 768,\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tarrows: true,\n\t\t\t\t\t\tslidesToShow: 2,\n\t\t\t\t\t\tslidesToScroll: 1,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tbreakpoint: 500,\n\t\t\t\t\tsettings: {\n\t\t\t\t\t\tarrows: false,\n\t\t\t\t\t\tslidesToShow: 2,\n\t\t\t\t\t\tslidesToScroll: 1,\n\t\t\t\t\t}\n\t\t\t\t},\t\t\t\t\t\t\n\t\t\t]\n\t\t});\n\n\t};\n\n\t\n});\n  \n","// OuiCal\nvar MS_IN_MINUTES = 60 * 1000;\n\nvar formatTime = function(date) {\n\treturn date.toISOString().replace(/-|:|\\.\\d+/g, '');\n};\n\nvar calculateEndTime = function(event) {\n\treturn event.end ?\n\t\tformatTime(event.end) :\n\t\tformatTime(new Date(event.start.getTime() + (event.duration * MS_IN_MINUTES)));\n};\n\nvar calendarGenerators = {\n\tgoogle: function(event) {\n\t\tvar startTime = formatTime(event.start);\n\t\tvar endTime = calculateEndTime(event);\n\n    console.log('Google event.start', event.start);\n    console.log('Google startTime', startTime);\n\n\t\tvar href = encodeURI([\n\t\t\t'https://www.google.com/calendar/render',\n\t\t\t'?action=TEMPLATE',\n\t\t\t'&text=' + (event.title || ''),\n\t\t\t'&dates=' + (startTime || ''),\n\t\t\t'/' + (endTime || ''),\n\t\t\t'&details=' + (event.description || ''),\n\t\t\t'&location=' + (event.address || ''),\n\t\t\t'&sprop=&sprop=name:'\n\t\t].join(''));\n\t\treturn '<a class=\"icon-google\" target=\"_blank\" href=\"' +\n\t\t\thref + '\">Google</a>';\n\t},\n\n\tyahoo: function(event) {\n\t\t// var eventDuration = event.end ?\n\t\t// \t((event.end.getTime() - event.start.getTime())/ MS_IN_MINUTES) :\n\t\t// \tevent.duration;\n\n\t\t// // Yahoo dates are crazy, we need to convert the duration from minutes to hh:mm\n\t\t// var yahooHourDuration = eventDuration < 600 ?\n\t\t// \t'0' + Math.floor((eventDuration / 60)) :\n\t\t// \tMath.floor((eventDuration / 60)) + '';\n\n\t\t// var yahooMinuteDuration = eventDuration % 60 < 10 ?\n\t\t// \t'0' + eventDuration % 60 :\n\t\t// \teventDuration % 60 + '';\n\n\t\t// var yahooEventDuration = yahooHourDuration + yahooMinuteDuration;\n\n\t\t// Remove timezone from event time\n\t\tvar st = formatTime(new Date(event.start - (event.start.getTimezoneOffset() * MS_IN_MINUTES))) || '';\n    var et = formatTime(new Date(event.end - (event.end.getTimezoneOffset() * MS_IN_MINUTES))) || '';\n\n    \n\t\tvar href = encodeURI([\n\t\t\t'http://calendar.yahoo.com/?v=60&view=d&type=20',\n\t\t\t'&TITLE=' + (event.title || ''),\n      '&ST=' + (st || ''),\n\t\t\t'&ET=' + (et || ''),\n\t\t\t'&DESC=' + (event.description || ''),\n\t\t\t'&in_loc=' + (event.address || '')\n\t\t].join(''));\n\n\t\treturn '<a class=\"icon-yahoo\" target=\"_blank\" href=\"' +\n\t\t\thref + '\">Yahoo!</a>';\n\t},\n\n\tics: function(event, eClass, calendarName) {\n\t\tvar startTime = formatTime(event.start);\n\t\tvar endTime = calculateEndTime(event);\n\n\t\tvar href = encodeURI(\n\t\t\t'data:text/calendar;charset=utf8,' + [\n\t\t\t\t'BEGIN:VCALENDAR',\n\t\t\t\t'VERSION:2.0',\n\t\t\t\t'BEGIN:VEVENT',\n\t\t\t\t'URL:' + document.URL,\n\t\t\t\t'DTSTART:' + (startTime || ''),\n\t\t\t\t'DTEND:' + (endTime || ''),\n\t\t\t\t'SUMMARY:' + (event.title || ''),\n\t\t\t\t'DESCRIPTION:' + (event.description || ''),\n\t\t\t\t'LOCATION:' + (event.address || ''),\n\t\t\t\t'END:VEVENT',\n\t\t\t\t'END:VCALENDAR'].join('\\n'));\n\n\t\treturn '<a class=\"' + eClass + '\" target=\"_blank\" href=\"' +\n\t\t\thref + '\">' + calendarName + '</a>';\n\t},\n\n\tical: function(event) {\n\t\treturn this.ics(event, 'icon-ical', 'iCal');\n\t},\n\n\toutlook: function(event) {\n\t\treturn this.ics(event, 'icon-outlook', 'Outlook');\n\t}\n};\n\nvar generateCalendars = function(event) {\n\treturn {\n\t\tgoogle: calendarGenerators.google(event),\n\t\tyahoo: calendarGenerators.yahoo(event),\n\t\tical: calendarGenerators.ical(event),\n\t\toutlook: calendarGenerators.outlook(event)\n\t};\n};\n\n// Make sure we have the necessary event data, such as start time and event duration\nvar validParams = function(params) {\n\treturn params.data !== undefined && params.data.start !== undefined &&\n\t\t(params.data.end !== undefined || params.data.duration !== undefined);\n};\n\nvar generateMarkup = function(calendars, clazz, calendarId) {\n\tvar result = document.createElement('div');\n\n\tresult.innerHTML = '<label for=\"checkbox-for-' +\n\t\tcalendarId + '\" class=\"add-to-calendar-checkbox\">Add to my Calendar</label>';\n\tresult.innerHTML += '<input name=\"add-to-calendar-checkbox\" class=\"add-to-calendar-checkbox\" id=\"checkbox-for-' + calendarId + '\" type=\"checkbox\">';\n\n\tObject.keys(calendars).forEach(function(services) {\n\t\tresult.innerHTML += calendars[services];\n\t});\n\n\tresult.className = 'add-to-calendar';\n\tif (clazz !== undefined) {\n\t\tresult.className += (' ' + clazz);\n\t}\n\n\tresult.id = calendarId;\n\treturn result;\n};\n\nvar getClass = function(params) {\n\tif (params.options && params.options.class) {\n\t\treturn params.options.class;\n\t}\n};\n\nvar getOrGenerateCalendarId = function(params) {\n\treturn params.options && params.options.id ?\n\t\tparams.options.id :\n\t\tMath.floor(Math.random() * 1000000); // Generate a 6-digit random ID\n};\n\nvar createCalendar = function(params) {\n\tif (!validParams(params)) {\n\t\tconsole.log('Event details missing.');\n\t\treturn;\n\t}\n\n\treturn generateMarkup(generateCalendars(params.data),\n\t\t\t\t\t\t\t\t\t\t\t\tgetClass(params),\n\t\t\t\t\t\t\t\t\t\t\t\tgetOrGenerateCalendarId(params));\n};\nconsole.log('** Create Calendar:', createCalendar);\n"]}