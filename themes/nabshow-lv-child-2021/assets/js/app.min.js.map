{"version":3,"sources":["main.js","ouical.js"],"names":["jQuery","$","toggleAriaExpanded","el","action","target","next","attr","closeAllAriaExpandeds","each","this","css","on","toggleClass","elExpanded","document","event","console","log","closest","length","slick","slidesToShow","slidesToScroll","dots","arrows","infinite","centerMode","centerPadding","fade","asNavFor","swipe","swipeToSlide","focusOnSelect","responsive","breakpoint","settings","MS_IN_MINUTES","formatTime","date","toISOString","replace","calculateEndTime","end","Date","start","getTime","duration","calendarGenerators","google","startTime","endTime","encodeURI","title","description","address","join","yahoo","st","getTimezoneOffset","et","ics","eClass","calendarName","URL","ical","outlook","generateCalendars","validParams","params","undefined","data","generateMarkup","calendars","clazz","calendarId","result","createElement","innerHTML","Object","keys","forEach","services","className","id","getClass","options","getOrGenerateCalendarId","Math","floor","random","createCalendar"],"mappings":"AAAA,aAEAA,QAAO,SAASC,GAYf,SAASC,EAAmBC,EAAIC,GAC/B,IAAIC,EAASJ,EAAEE,GAAIG,OACnBH,EAAGI,KAAK,gBAA4B,SAAXH,GACzBC,EAAOE,KAAK,SAAqB,UAAXH,GAIvB,SAASI,IACRP,EAAE,4CAA4CQ,MAAK,WAElDP,EADSD,EAAES,MACY,YAnBzBT,EAAE,6BAA6BM,KAAK,gBAAiB,SAErDN,EAAE,aAAaM,KAAK,SAAU,UAAUI,IAAI,UAAU,SAEtDV,EAAE,qBAAqBW,GAAG,SAAS,WAClCX,EAAE,QAAQY,YAAY,sBAmBvBZ,EAAE,4CAA4CQ,MAAK,WAClD,IAAIN,EAAKF,EAAES,MACXP,EAAGS,GAAG,SAAS,WACd,IAAIE,EAAaX,EAAGI,KAAK,iBACzBC,IACAN,EAAmBC,EAAmB,SAAfW,EAAwB,QAAU,cAK3Db,EAAEc,UAAUH,GAAG,SAAS,SAASI,GAChCC,QAAQC,IAAI,yBACRjB,EAAEe,EAAMX,QAAQc,QAAQ,4CAA4CC,SACvEH,QAAQC,IAAI,qCACZV,QAKFP,EAAE,UAAUoB,MAAM,CACjBC,aAAc,EACdC,eAAgB,EAChBC,MAAM,EACNC,QAAQ,EACRC,UAAU,EACVC,YAAY,EACZC,cAAe,SAGZ3B,EAAE,mBAAmBmB,OAAS,IAEjCnB,EAAE,mBAAmBoB,MAAM,CAC1BC,aAAc,EACdC,eAAgB,EAChBE,QAAQ,EACRI,MAAM,EACNC,SAAU,kBACVC,OAAO,EACPC,cAAc,IAGf/B,EAAE,mBAAmBoB,MAAM,CAC1BC,aAAc,EACdC,eAAgB,EAChBO,SAAU,kBACVL,QAAQ,EACRQ,eAAe,EACfF,OAAO,EACPC,cAAc,IAGf/B,EAAE,uBAAuBoB,MAAM,CAC9BC,aAAc,EACdC,eAAgB,EAChBE,QAAQ,EACRE,YAAY,EACZO,WAAY,CACX,CACCC,WAAY,KACZC,SAAU,CACTX,QAAQ,EACRH,aAAc,EACdC,eAAgB,IAGlB,CACCY,WAAY,KACZC,SAAU,CACTX,QAAQ,EACRH,aAAc,EACdC,eAAgB,IAGlB,CACCY,WAAY,IACZC,SAAU,CACTX,QAAQ,EACRH,aAAc,EACdC,eAAgB,IAGlB,CACCY,WAAY,IACZC,SAAU,CACTX,QAAQ,EACRH,aAAc,EACdC,eAAgB;ACnHtB,aACA,IAAIc,cAAgB,IAEhBC,WAAa,SAASC,GACzB,OAAOA,EAAKC,cAAcC,QAAQ,aAAc,KAG7CC,iBAAmB,SAAS1B,GAC/B,OAAOA,EAAM2B,IACZL,WAAWtB,EAAM2B,KACjBL,WAAW,IAAIM,KAAK5B,EAAM6B,MAAMC,UAAa9B,EAAM+B,SAAWV,iBAG5DW,mBAAqB,CACxBC,OAAQ,SAASjC,GAChB,IAAIkC,EAAYZ,WAAWtB,EAAM6B,OAC7BM,EAAUT,iBAAiB1B,GAe/B,OAbEC,QAAQC,IAAI,qBAAsBF,EAAM6B,OACxC5B,QAAQC,IAAI,mBAAoBgC,GAY3B,gDAVIE,UAAU,CACpB,yCACA,mBACA,UAAYpC,EAAMqC,OAAS,IAC3B,WAAaH,GAAa,IAC1B,KAAOC,GAAW,IAClB,aAAenC,EAAMsC,aAAe,IACpC,cAAgBtC,EAAMuC,SAAW,IACjC,uBACCC,KAAK,KAEC,gBAGTC,MAAO,SAASzC,GAiBf,IAAI0C,EAAKpB,WAAW,IAAIM,KAAK5B,EAAM6B,MAAS7B,EAAM6B,MAAMc,oBAAsBtB,iBAAoB,GAC5FuB,EAAKtB,WAAW,IAAIM,KAAK5B,EAAM2B,IAAO3B,EAAM2B,IAAIgB,oBAAsBtB,iBAAoB,GAYhG,MAAO,+CATIe,UAAU,CACpB,iDACA,WAAapC,EAAMqC,OAAS,IACzB,QAAUK,GAAM,IACnB,QAAUE,GAAM,IAChB,UAAY5C,EAAMsC,aAAe,IACjC,YAActC,EAAMuC,SAAW,KAC9BC,KAAK,KAGC,gBAGTK,IAAK,SAAS7C,EAAO8C,EAAQC,GAC5B,IAAIb,EAAYZ,WAAWtB,EAAM6B,OAC7BM,EAAUT,iBAAiB1B,GAgB/B,MAAO,aAAe8C,EAAS,2BAdpBV,UACV,mCAAqC,CACpC,kBACA,cACA,eACA,OAASrC,SAASiD,IAClB,YAAcd,GAAa,IAC3B,UAAYC,GAAW,IACvB,YAAcnC,EAAMqC,OAAS,IAC7B,gBAAkBrC,EAAMsC,aAAe,IACvC,aAAetC,EAAMuC,SAAW,IAChC,aACA,iBAAiBC,KAAK,OAGhB,KAAOO,EAAe,QAG/BE,KAAM,SAASjD,GACd,OAAON,KAAKmD,IAAI7C,EAAO,YAAa,SAGrCkD,QAAS,SAASlD,GACjB,OAAON,KAAKmD,IAAI7C,EAAO,eAAgB,aAIrCmD,kBAAoB,SAASnD,GAChC,MAAO,CACNiC,OAAQD,mBAAmBC,OAAOjC,GAClCyC,MAAOT,mBAAmBS,MAAMzC,GAChCiD,KAAMjB,mBAAmBiB,KAAKjD,GAC9BkD,QAASlB,mBAAmBkB,QAAQlD,KAKlCoD,YAAc,SAASC,GAC1B,YAAuBC,IAAhBD,EAAOE,WAA4CD,IAAtBD,EAAOE,KAAK1B,aAC1ByB,IAApBD,EAAOE,KAAK5B,UAA8C2B,IAAzBD,EAAOE,KAAKxB,WAG5CyB,eAAiB,SAASC,EAAWC,EAAOC,GAC/C,IAAIC,EAAS7D,SAAS8D,cAAc,OAgBpC,OAdAD,EAAOE,UAAY,4BAClBH,EAAa,gEACdC,EAAOE,WAAa,4FAA8FH,EAAa,qBAE/HI,OAAOC,KAAKP,GAAWQ,SAAQ,SAASC,GACvCN,EAAOE,WAAaL,EAAUS,MAG/BN,EAAOO,UAAY,uBACLb,IAAVI,IACHE,EAAOO,WAAc,IAAMT,GAG5BE,EAAOQ,GAAKT,EACLC,GAGJS,SAAW,SAAShB,GACvB,GAAIA,EAAOiB,SAAWjB,EAAOiB,QAAP,MACrB,OAAOjB,EAAOiB,QAAP,OAILC,wBAA0B,SAASlB,GACtC,OAAOA,EAAOiB,SAAWjB,EAAOiB,QAAQF,GACvCf,EAAOiB,QAAQF,GACfI,KAAKC,MAAsB,IAAhBD,KAAKE,WAGdC,eAAiB,SAAStB,GAC7B,GAAKD,YAAYC,GAKjB,OAAOG,eAAeL,kBAAkBE,EAAOE,MACpCc,SAAShB,GACTkB,wBAAwBlB,IANlCpD,QAAQC,IAAI,2BAQdD,QAAQC,IAAI,sBAAuByE","file":"app.min.js","sourcesContent":["// Your main script\r\n\r\njQuery(function($) {\r\n\r\n\t//set aria-expanded attrs to top level menu a tags\r\n\t$('.menu-item-has-children a').attr('aria-expanded', 'false');\r\n\t//add hidden attr to submenus\r\n\t$('.sub-menu').attr('hidden', 'hidden').css('display','block');\r\n\r\n\t$('.js-mobile-toggle').on('click', function() {\r\n\t\t$('html').toggleClass('_header-is-open');\r\n\t});\r\n\r\n\t// Function to open/close an aria-expanded dropdown\r\n\tfunction toggleAriaExpanded(el, action) {\r\n\t\tlet target = $(el).next();\r\n\t\tel.attr('aria-expanded', action === 'open');\r\n\t\ttarget.attr('hidden', action === 'close');\r\n\t};\r\n\r\n\t// Function to close all aria-expanded dropdowns\r\n\tfunction closeAllAriaExpandeds() {\r\n\t\t$('.menu-item-has-children a[aria-expanded]').each(function(){\r\n\t\t\tlet el = $(this);\r\n\t\t\ttoggleAriaExpanded(el, 'close');\r\n\t\t});\r\n\t};\r\n\r\n\t// Aria Expanded for dropdowns etc\r\n\t$('.menu-item-has-children a[aria-expanded]').each(function(){\r\n\t\tlet el = $(this);\r\n\t\tel.on('click', function(){\r\n\t\t\tlet elExpanded = el.attr('aria-expanded');\r\n\t\t\tcloseAllAriaExpandeds();\r\n\t\t\ttoggleAriaExpanded(el, elExpanded === 'true' ? 'close' : 'open');\t\t\r\n\t\t});\r\n\t});\r\n \r\n\t// Hide dropdown menu on click outside\r\n\t$(document).on(\"click\", function(event){\r\n\t\tconsole.log(\"∆∆∆ Document on Click\");\r\n\t\tif(!$(event.target).closest('.menu-item-has-children a[aria-expanded]').length){\r\n\t\t\tconsole.log(\"∆∆∆ Document on Click closing all\");\r\n\t\t\tcloseAllAriaExpandeds();\r\n\t\t}\r\n\t});\r\n\r\n\r\n\t$('.cards').slick({\r\n\t\tslidesToShow: 1,\r\n\t\tslidesToScroll: 1,\r\n\t\tdots: true,\r\n\t\tarrows: false,\r\n\t\tinfinite: false,\r\n\t\tcenterMode: true,\r\n\t\tcenterPadding: '20px',\r\n\t});\r\n\r\n\tif ($('.schedule__days').length > 0) {\r\n\t\t// each day\r\n\t\t$('.schedule__days').slick({\r\n\t\t\tslidesToShow: 1,\r\n\t\t\tslidesToScroll: 1,\r\n\t\t\tarrows: false,\r\n\t\t\tfade: true,\r\n\t\t\tasNavFor: '.schedule__menu',\r\n\t\t\tswipe: false,\r\n\t\t\tswipeToSlide: false,\r\n\t\t});\r\n\t\t// menu for days\r\n\t\t$('.schedule__menu').slick({\r\n\t\t\tslidesToShow: 5,\r\n\t\t\tslidesToScroll: 1,\r\n\t\t\tasNavFor: '.schedule__days',\r\n\t\t\tarrows: false,\r\n\t\t\tfocusOnSelect: true,\r\n\t\t\tswipe: false,\r\n\t\t\tswipeToSlide: false,\t\t\t\r\n\t\t});\r\n\t\t// sessions\r\n\t\t$('.schedule__sessions').slick({\r\n\t\t\tslidesToShow: 5,\r\n\t\t\tslidesToScroll: 1,\r\n\t\t\tarrows: true,\r\n\t\t\tcenterMode: true,\r\n\t\t\tresponsive: [\t\r\n\t\t\t\t{\r\n\t\t\t\t\tbreakpoint: 1440,\r\n\t\t\t\t\tsettings: {\r\n\t\t\t\t\t\tarrows: true,\r\n\t\t\t\t\t\tslidesToShow: 4,\r\n\t\t\t\t\t\tslidesToScroll: 1,\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tbreakpoint: 1024,\r\n\t\t\t\t\tsettings: {\r\n\t\t\t\t\t\tarrows: true,\r\n\t\t\t\t\t\tslidesToShow: 3,\r\n\t\t\t\t\t\tslidesToScroll: 1,\r\n\t\t\t\t\t}\r\n\t\t\t\t},\t\t\t\r\n\t\t\t\t{\r\n\t\t\t\t\tbreakpoint: 768,\r\n\t\t\t\t\tsettings: {\r\n\t\t\t\t\t\tarrows: true,\r\n\t\t\t\t\t\tslidesToShow: 2,\r\n\t\t\t\t\t\tslidesToScroll: 1,\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tbreakpoint: 500,\r\n\t\t\t\t\tsettings: {\r\n\t\t\t\t\t\tarrows: false,\r\n\t\t\t\t\t\tslidesToShow: 2,\r\n\t\t\t\t\t\tslidesToScroll: 1,\r\n\t\t\t\t\t}\r\n\t\t\t\t},\t\t\t\t\t\t\r\n\t\t\t]\r\n\t\t});\r\n\r\n\t};\r\n\r\n\t\r\n});\r\n  \r\n","// OuiCal\r\nvar MS_IN_MINUTES = 60 * 1000;\r\n\r\nvar formatTime = function(date) {\r\n\treturn date.toISOString().replace(/-|:|\\.\\d+/g, '');\r\n};\r\n\r\nvar calculateEndTime = function(event) {\r\n\treturn event.end ?\r\n\t\tformatTime(event.end) :\r\n\t\tformatTime(new Date(event.start.getTime() + (event.duration * MS_IN_MINUTES)));\r\n};\r\n\r\nvar calendarGenerators = {\r\n\tgoogle: function(event) {\r\n\t\tvar startTime = formatTime(event.start);\r\n\t\tvar endTime = calculateEndTime(event);\r\n\r\n    console.log('Google event.start', event.start);\r\n    console.log('Google startTime', startTime);\r\n\r\n\t\tvar href = encodeURI([\r\n\t\t\t'https://www.google.com/calendar/render',\r\n\t\t\t'?action=TEMPLATE',\r\n\t\t\t'&text=' + (event.title || ''),\r\n\t\t\t'&dates=' + (startTime || ''),\r\n\t\t\t'/' + (endTime || ''),\r\n\t\t\t'&details=' + (event.description || ''),\r\n\t\t\t'&location=' + (event.address || ''),\r\n\t\t\t'&sprop=&sprop=name:'\r\n\t\t].join(''));\r\n\t\treturn '<a class=\"icon-google\" target=\"_blank\" href=\"' +\r\n\t\t\thref + '\">Google</a>';\r\n\t},\r\n\r\n\tyahoo: function(event) {\r\n\t\t// var eventDuration = event.end ?\r\n\t\t// \t((event.end.getTime() - event.start.getTime())/ MS_IN_MINUTES) :\r\n\t\t// \tevent.duration;\r\n\r\n\t\t// // Yahoo dates are crazy, we need to convert the duration from minutes to hh:mm\r\n\t\t// var yahooHourDuration = eventDuration < 600 ?\r\n\t\t// \t'0' + Math.floor((eventDuration / 60)) :\r\n\t\t// \tMath.floor((eventDuration / 60)) + '';\r\n\r\n\t\t// var yahooMinuteDuration = eventDuration % 60 < 10 ?\r\n\t\t// \t'0' + eventDuration % 60 :\r\n\t\t// \teventDuration % 60 + '';\r\n\r\n\t\t// var yahooEventDuration = yahooHourDuration + yahooMinuteDuration;\r\n\r\n\t\t// Remove timezone from event time\r\n\t\tvar st = formatTime(new Date(event.start - (event.start.getTimezoneOffset() * MS_IN_MINUTES))) || '';\r\n    var et = formatTime(new Date(event.end - (event.end.getTimezoneOffset() * MS_IN_MINUTES))) || '';\r\n\r\n    \r\n\t\tvar href = encodeURI([\r\n\t\t\t'http://calendar.yahoo.com/?v=60&view=d&type=20',\r\n\t\t\t'&TITLE=' + (event.title || ''),\r\n      '&ST=' + (st || ''),\r\n\t\t\t'&ET=' + (et || ''),\r\n\t\t\t'&DESC=' + (event.description || ''),\r\n\t\t\t'&in_loc=' + (event.address || '')\r\n\t\t].join(''));\r\n\r\n\t\treturn '<a class=\"icon-yahoo\" target=\"_blank\" href=\"' +\r\n\t\t\thref + '\">Yahoo!</a>';\r\n\t},\r\n\r\n\tics: function(event, eClass, calendarName) {\r\n\t\tvar startTime = formatTime(event.start);\r\n\t\tvar endTime = calculateEndTime(event);\r\n\r\n\t\tvar href = encodeURI(\r\n\t\t\t'data:text/calendar;charset=utf8,' + [\r\n\t\t\t\t'BEGIN:VCALENDAR',\r\n\t\t\t\t'VERSION:2.0',\r\n\t\t\t\t'BEGIN:VEVENT',\r\n\t\t\t\t'URL:' + document.URL,\r\n\t\t\t\t'DTSTART:' + (startTime || ''),\r\n\t\t\t\t'DTEND:' + (endTime || ''),\r\n\t\t\t\t'SUMMARY:' + (event.title || ''),\r\n\t\t\t\t'DESCRIPTION:' + (event.description || ''),\r\n\t\t\t\t'LOCATION:' + (event.address || ''),\r\n\t\t\t\t'END:VEVENT',\r\n\t\t\t\t'END:VCALENDAR'].join('\\n'));\r\n\r\n\t\treturn '<a class=\"' + eClass + '\" target=\"_blank\" href=\"' +\r\n\t\t\thref + '\">' + calendarName + '</a>';\r\n\t},\r\n\r\n\tical: function(event) {\r\n\t\treturn this.ics(event, 'icon-ical', 'iCal');\r\n\t},\r\n\r\n\toutlook: function(event) {\r\n\t\treturn this.ics(event, 'icon-outlook', 'Outlook');\r\n\t}\r\n};\r\n\r\nvar generateCalendars = function(event) {\r\n\treturn {\r\n\t\tgoogle: calendarGenerators.google(event),\r\n\t\tyahoo: calendarGenerators.yahoo(event),\r\n\t\tical: calendarGenerators.ical(event),\r\n\t\toutlook: calendarGenerators.outlook(event)\r\n\t};\r\n};\r\n\r\n// Make sure we have the necessary event data, such as start time and event duration\r\nvar validParams = function(params) {\r\n\treturn params.data !== undefined && params.data.start !== undefined &&\r\n\t\t(params.data.end !== undefined || params.data.duration !== undefined);\r\n};\r\n\r\nvar generateMarkup = function(calendars, clazz, calendarId) {\r\n\tvar result = document.createElement('div');\r\n\r\n\tresult.innerHTML = '<label for=\"checkbox-for-' +\r\n\t\tcalendarId + '\" class=\"add-to-calendar-checkbox\">Add to my Calendar</label>';\r\n\tresult.innerHTML += '<input name=\"add-to-calendar-checkbox\" class=\"add-to-calendar-checkbox\" id=\"checkbox-for-' + calendarId + '\" type=\"checkbox\">';\r\n\r\n\tObject.keys(calendars).forEach(function(services) {\r\n\t\tresult.innerHTML += calendars[services];\r\n\t});\r\n\r\n\tresult.className = 'add-to-calendar';\r\n\tif (clazz !== undefined) {\r\n\t\tresult.className += (' ' + clazz);\r\n\t}\r\n\r\n\tresult.id = calendarId;\r\n\treturn result;\r\n};\r\n\r\nvar getClass = function(params) {\r\n\tif (params.options && params.options.class) {\r\n\t\treturn params.options.class;\r\n\t}\r\n};\r\n\r\nvar getOrGenerateCalendarId = function(params) {\r\n\treturn params.options && params.options.id ?\r\n\t\tparams.options.id :\r\n\t\tMath.floor(Math.random() * 1000000); // Generate a 6-digit random ID\r\n};\r\n\r\nvar createCalendar = function(params) {\r\n\tif (!validParams(params)) {\r\n\t\tconsole.log('Event details missing.');\r\n\t\treturn;\r\n\t}\r\n\r\n\treturn generateMarkup(generateCalendars(params.data),\r\n\t\t\t\t\t\t\t\t\t\t\t\tgetClass(params),\r\n\t\t\t\t\t\t\t\t\t\t\t\tgetOrGenerateCalendarId(params));\r\n};\r\nconsole.log('** Create Calendar:', createCalendar);\r\n"]}